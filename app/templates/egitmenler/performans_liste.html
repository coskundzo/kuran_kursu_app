{% extends "base.html" %}

{% block title %}Eğitmen Performans Değerlendirmeleri - E-Kuran Kursu Yönetim Sistemi{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row mb-3">
        <div class="col-md-12">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <h2><i class="bi bi-graph-up-arrow"></i> Eğitmen Performans Değerlendirmeleri</h2>
                    <p class="text-muted">Bu bölümde, eğiten performansları yapılmaktadır.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Eğitmen Listesi -->
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover table-striped">
                            <thead class="table-dark">
                                <tr>
                                    <th>#</th>
                                    <th>Eğitmen</th>
                                    <th>Kurs</th>
                                    <th>Branş</th>
                                    <th>Son Değerlendirme</th>
                                    <th>İşlemler</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% if egitmen_performans_list %}
                                    {% for item in egitmen_performans_list %}
                                    <tr>
                                        <td>{{ loop.index }}</td>
                                        <td>
                                            <strong>{{ item.egitmen.adsoyad }}</strong><br>
                                            <small class="text-muted">{{ item.egitmen.telefon or '-' }}</small>
                                        </td>
                                        <td>{{ item.egitmen.kurs.adi if item.egitmen.kurs else '-' }}</td>
                                        <td>{{ item.egitmen.brans or '-' }}</td>
                                        <td>
                                            {% if item.son_yil and item.son_ay %}
                                                <span class="badge bg-info">
                                                    {{ item.son_yil }}/{{ '%02d'|format(item.son_ay) }}
                                                </span>
                                            {% else %}
                                                <span class="badge bg-secondary">Henüz değerlendirilmedi</span>
                                            {% endif %}
                                        </td>
                                        <td>
                                            <a href="{{ url_for('egitmenler.performans', id=item.egitmen.id) }}" 
                                               class="btn btn-sm btn-primary">
                                                <i class="bi bi-pencil-square"></i> Değerlendir
                                            </a>
                                            
                                            {% if item.son_yil and item.son_ay %}
                                            <a href="{{ url_for('egitmenler.performans', id=item.egitmen.id, yil=item.son_yil, ay=item.son_ay) }}" 
                                               class="btn btn-sm btn-info">
                                                <i class="bi bi-eye"></i> Son Değerlendirmeyi Gör
                                            </a>
                                            {% endif %}
                                        </td>
                                    </tr>
                                    {% endfor %}
                                {% else %}
                                    <tr>
                                        <td colspan="6" class="text-center text-muted py-4">
                                            <i class="bi bi-inbox" style="font-size: 3rem;"></i>
                                            <p class="mt-2">Henüz aktif eğitmen bulunmamaktadır.</p>
                                        </td>
                                    </tr>
                                {% endif %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bilgilendirme -->
    <div class="row mt-3">
        <div class="col-12">
            <div class="alert alert-info">
                <i class="bi bi-info-circle-fill me-2"></i>
                <strong>Nasıl Kullanılır?</strong>
                <ul class="mb-0 mt-2">
                    <li><strong>Değerlendir:</strong> Eğitmen için yeni performans değerlendirmesi yapın veya mevcut ayın değerlendirmesini düzenleyin.</li>
                    <li><strong>4 Haftalık Değerlendirme:</strong> Her ay 4 hafta için performans kriterleri belirleyip puanlayabilirsiniz.</li>
                    <li><strong>Özel Kriterler:</strong> "Ders Anlatımı", "Zamanında Gelme", "İletişim" gibi kendi kriterlerinizi ekleyebilirsiniz.</li>
                    <li><strong>Puan Aralığı:</strong> Her kriter için 0-100 arası puan verebilirsiniz.</li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}
